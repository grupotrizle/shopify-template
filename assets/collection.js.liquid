const loadCollection=async()=>{const productList=document.querySelector(".collection .product-list");productList&&(productList.style.opacity=".2"),window.scrollTo({top:0,behavior:"smooth"});const data=await(await fetch(window.location.href)).text(),newDocument=new DOMParser().parseFromString(data,"text/html");document.querySelector(".collection")?.replaceWith(newDocument.querySelector(".collection")),document.querySelectorAll("#offcanvas-filters .collapse-inner").forEach(collapse=>{const collapseId=collapse.closest(".collapse").getAttribute("id");collapse.replaceWith(newDocument.querySelector(`#offcanvas-filters #${collapseId} .collapse-inner`))}),document.querySelector("#offcanvas-filters .offcanvas-footer")?.replaceWith(newDocument.querySelector("#offcanvas-filters .offcanvas-footer")),document.querySelector("#offcanvas-filters .btn-filters-clear-all")?.replaceWith(newDocument.querySelector("#offcanvas-filters .btn-filters-clear-all")),document.querySelector('#offcanvas-filters [name="sort_by"]')?.replaceWith(newDocument.querySelector('#offcanvas-filters [name="sort_by"]'));const customEvent=new CustomEvent("updated.ecomify.collection");window.dispatchEvent(customEvent)};window.onChangeCollectionFilter=async(input,event)=>{const form=input.closest("form"),params=new URLSearchParams(new FormData(form)),url=`${window.location.pathname}?${params.toString()}`;window.history.replaceState({},"",url),await loadCollection()};const initCollectionFiltersPriceChange=()=>{document.querySelectorAll(".filter-price-group input").forEach(input=>{input.addEventListener("input",window.debounce(async event=>{const form=input.closest("form"),params=new URLSearchParams(new FormData(form)),url=`${window.location.pathname}?${params.toString()}`;window.history.replaceState({},"",url),await loadCollection()},750))})};initCollectionFiltersPriceChange(),window.addEventListener("updated.ecomify.collection",initCollectionFiltersPriceChange),window.onClickFiltersViewMore=(btn,event)=>{btn.closest(".collapse").querySelectorAll(".form-check").forEach(elem=>{elem.removeAttribute("hidden")}),btn.remove()},window.onClickClearAllFilters=async(btn,event)=>{const form=btn.closest("form"),params=new URLSearchParams;params.set("sort_by",form.querySelector('[name="sort_by"]').value);const url=`${window.location.pathname}?${params.toString()}`;window.history.replaceState({},"",url),await loadCollection()},window.onChangeCollectionSortBy=value=>{const params=new URLSearchParams(window.location.search);params.set("sort_by",value);const url=`${window.location.pathname}?${params.toString()}`;window.history.replaceState({},"",url),loadCollection()},window.onClickCollectionLoadMore=async(btn,event)=>{event.preventDefault(),btn.style.width=`${btn.offsetWidth+2}px`,btn.style.height=`${btn.offsetHeight+2}px`,btn.innerHTML=`
        <div class="spinner-border spinner-border-sm mx-auto" role="status" style="width: 1.2rem; height: 1.2rem">
            <span class="visually-hidden">Loading...</span>
        </div>
    `,window.history.replaceState({},"",btn.dataset.nextUrl);const data=await(await fetch(window.location.href)).text(),newDocument=new DOMParser().parseFromString(data,"text/html");document.querySelector(".collection .product-list").insertAdjacentHTML("beforeend",newDocument.querySelector(".collection .product-list").innerHTML),document.querySelector("#collection-pagination").replaceWith(newDocument.querySelector("#collection-pagination")),document.querySelectorAll(".collection .product-link").forEach(link=>{link.addEventListener("click",()=>{window.location.hash=`#${link.closest(".product-item").dataset.productId}`})});const customEvent=new CustomEvent("updated.ecomify.collection");window.dispatchEvent(customEvent)},window.onClickCollectionLoadPrevious=async(btn,event)=>{event.preventDefault(),btn.style.width=`${btn.offsetWidth}px`,btn.style.height=`${btn.offsetHeight}px`,btn.innerHTML=`
        <div class="spinner-border spinner-border-sm mx-auto" role="status" style="width: 1.2rem; height: 1.2rem">
            <span class="visually-hidden">Loading...</span>
        </div>
    `,window.history.replaceState({},"",btn.dataset.previousUrl);const data=await(await fetch(window.location.href)).text(),newDocument=new DOMParser().parseFromString(data,"text/html");document.querySelector(".collection .product-list").insertAdjacentHTML("afterbegin",newDocument.querySelector(".collection .product-list").innerHTML),document.querySelector("#btn-load-previous")?.replaceWith(newDocument.querySelector("#btn-load-previous"));const customEvent=new CustomEvent("updated.ecomify.collection");window.dispatchEvent(customEvent)};const initPaginationObserver=()=>{const pagination=document.querySelector("#collection-pagination");if(!pagination)return;new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const btn=pagination.querySelector(".btn-load-more");btn&&btn.click()}})},{threshold:0,rootMargin:"0px 0px -100px 0px"}).observe(pagination)};initPaginationObserver(),window.addEventListener("updated.ecomify.collection",initPaginationObserver);const initProductListObserver=()=>{if(!document.querySelector(".collection"))return;const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){const url=new URL(window.location);url.searchParams.set("page",entry.target.dataset.currentPage),window.history.replaceState({},"",url)}})},{threshold:0,rootMargin:"0px 0px -200px 0px"});document.querySelectorAll(".collection .product-item:not(.is-observed)").forEach(elem=>{observer.observe(elem),elem.classList.add("is-observed")})};initProductListObserver(),window.addEventListener("updated.ecomify.collection",initProductListObserver),window.setCollectionItemHash=link=>{link.closest(".collection")&&(window.location.hash=`#${link.closest(".product-item").dataset.productId}`)},window.location.hash&&setTimeout(()=>{document.querySelector(`.product-item[data-product-id="${window.location.hash.replace("#","")}"]`).scrollIntoView()},500);const fixedUtilitiesBarOnScroll=()=>{const utilities=document.querySelector("#collection-utilities");if(!utilities)return;const navbarHeight=document.querySelector("#shopify-section-navbar.sticky-top")?.clientHeight||0,top=700;document.addEventListener("scroll",window.throttle(()=>{window.scrollY>top?(utilities.classList.add("sticky-top"),utilities.style.top=`${navbarHeight}px`,setTimeout(()=>{utilities.classList.add("show")},200)):(utilities.classList.remove("show"),setTimeout(()=>{utilities.classList.remove("sticky-top"),utilities.style.top="0"},200))},200)),setInterval(()=>{window.scrollY<50&&(utilities.classList.remove("sticky-top"),utilities.style.top="0")},1e3)};fixedUtilitiesBarOnScroll(),window.addEventListener("updated.ecomify.collection",()=>setTimeout(()=>{fixedUtilitiesBarOnScroll()},1e3));const handleScrollTopButton=()=>{const btn=document.querySelector("#btn-collection-scroll-top"),productList=document.querySelector(".collection .product-list");if(!btn||!productList)return;const top=productList.getBoundingClientRect().top;document.addEventListener("scroll",window.throttle(()=>{window.scrollY>top?btn.classList.add("btn-show"):btn.classList.remove("btn-show")},200))};handleScrollTopButton(),window.addEventListener("updated.ecomify.collection",handleScrollTopButton),window.showAllSwatchesWithinProductItem=(btn,event)=>{btn.closest(".color-swatches").querySelectorAll("li").forEach(elem=>{elem.removeAttribute("hidden")}),btn.remove()};
//# sourceMappingURL=/cdn/shop/t/52/assets/collection.js.map?v=29039394400951578931689086060
