let _shopify_locale=Shopify.locale,_shopify_country=Shopify.country,_affirm_locale,_affirm_country,_region_public_key;_shopify_country==="US"?(_affirm_country="USA",_affirm_locale="en_US",_region_public_key="TIX6PMJ5JXJFYW61"):_shopify_country==="CA"?(_affirm_country="CAN",_affirm_locale=(_shopify_locale==="fr"?"fr":"en")+"_"+_shopify_country,_region_public_key="TIX6PMJ5JXJFYW61"):(_affirm_country="USA",_affirm_locale="en_US",_region_public_key="TIX6PMJ5JXJFYW61"),_affirm_config={public_api_key:_region_public_key,script:"https://cdn1.affirm.com/js/v2/affirm.js",locale:_affirm_locale,country_code:_affirm_country},function(l,g,m,e,a,f,b){var d,c=l[m]||{},h=document.createElement(f),n=document.getElementsByTagName(f)[0],k=function(a2,b2,c2){return function(){a2[b2]._.push([c2,arguments])}};for(c[e]=k(c,e,"set"),d=c[e],c[a]={},c[a]._=[],d._=[],c[a][b]=k(c,a,b),a=0,b="set add save post open empty reset on off trigger ready setProduct".split(" ");a<b.length;a++)d[b[a]]=k(c,e,b[a]);for(a=0,b=["get","token","url","items"];a<b.length;a++)d[b[a]]=function(){};h.async=!0,h.src=g[f],n.parentNode.insertBefore(h,n),delete g[f],d(g),l[m]=c}(window,_affirm_config,"affirm","checkout","ui","script","ready");let promosJSON='[{"promoStatus":true,"saleSelector":".comapre-price","comparePrices":false,"logoColor":"blue","logoType":"logo","addCents":false,"selector":".noraml-price","fontSize":"12","position":"beforeend","pageType":"product","onChange":"shopify-section-static-product-financing"}]',promos=JSON.parse(promosJSON);const defaultAlaElement="[data-price]";promos.forEach(promo=>{if(!promo.promoStatus)return!1;if(promo.pageType==="product"){let updateProduct2=function(){typeof jQuery<"u"&&jQuery.getJSON(window.location.pathname+".js",function(shopifyProduct){currentProduct=shopifyProduct,upsertVariantALA(promo,currentProduct),promo.dataElement&&jQuery(promo.dataElement).change(function(){upsertVariantALA(promo,currentProduct,function(){affirm.ui.ready(function(){affirm.ui.refresh()})})})}),promo.onChange&&setObserver(promo,updateProductFromAjaxPrice),promo.selector&&(pagePricingData(promo),promo.onChange&&setObserver(promo,changePrice))};var updateProduct=updateProduct2;promo.shopifyPageType&&promo.shopifyPageType!=="global"?meta.page.pageType===promo.shopifyPageType&&updateProduct2():updateProduct2()}else if(promo.pageType==="category"){let updateCategory2=function(){let thisElement2=promo.alaElement?promo.alaElement:defaultAlaElement,productCards=document.querySelectorAll(promo.dataElement);typeof jQuery<"u"&&jQuery(productCards).each(function(){let card=jQuery(this);attr=card.find('a[href*="products"]').attr("href"),urlParams=attr.split("/"),productIndex=urlParams.indexOf("products"),jQuery.getJSON("/products/"+urlParams[productIndex+1]+".js",function(product){insertElement=card.find(thisElement2),upsertAla(promo,product.price.toString(),insertElement[0])})})};var updateCategory=updateCategory2;promo.shopifyPageType&&promo.shopifyPageType!=="global"?meta.page.pageType===promo.shopifyPageType&&updateCategory2():updateCategory2(),promo.selector&&pagePricingData(promo)}else if(promo.pageType==="cart"){let thisElement3=promo.alaElement?document.querySelector(promo.alaElement):document.querySelector(defaultAlaElement);typeof jQuery<"u"&&(jQuery.getJSON("/cart.js",function(cart){upsertAla(promo,cart.total_price.toString(),thisElement3)}),jQuery(promo.dataElement).change(function(){jQuery.getJSON("/cart.js",function(cart){upsertAla(promo,cart.total_price.toString(),thisElement3,function(){affirm.ui.ready(function(){affirm.ui.refresh()})})})})),promo.selector?(pagePricingData(promo),promo.onChange&&setObserver(promo,changePrice)):promo.onChange&&setObserver(promo,updateCartFromAjaxPrice)}else promo.shopifyPageType&&promo.shopifyPageType!=="global"?meta.page.pageType===promo.shopifyPageType&&(pagePricingData(promo),promo.onChange&&setObserver(promo,changePrice)):(pagePricingData(promo),promo.onChange&&setObserver(promo,changePrice))});function setObserver(promo,changeMethod){setTimeout(function(){const targetNode=document.querySelector(promo.onChange),config={attributes:!0,childList:!0,subtree:!0},callback=function(mutationsList,observer2){for(let mutation of mutationsList)if(mutation.type==="childList"){setTimeout(changeMethod(observer2,promo,function(){observer2.observe(targetNode,config)}),1250);break}},observer=new MutationObserver(callback);targetNode&&observer.observe(targetNode,config)},1250)}function updateProductFromAjaxPrice(observer,promo,callback){observer.disconnect(),removeExistingALA(),upsertVariantALA(promo,currentProduct),affirm.ui.ready(function(){affirm.ui.refresh()}),setTimeout(callback,2500)}function updateCartFromAjaxPrice(observer,promo,callback){observer.disconnect();let thisElement=promo.alaElement?document.querySelector(promo.alaElement):document.querySelector(defaultAlaElement);typeof jQuery<"u"&&jQuery.getJSON("/cart.js",function(cart){upsertAla(promo,cart.total_price.toString(),thisElement),affirm.ui.ready(function(){affirm.ui.refresh()}),setTimeout(callback,1250)})}function changePrice(observer,promo,callback){observer.disconnect(),pagePricingData(promo,function(){setTimeout(callback,1250)})}function pagePricingData(promo,callback){let nodeList,salePrices,regularPrices,price;promo.comparePrices||(salePrices=!1,promo.saleSelector&&(salePrices=document.querySelectorAll(promo.saleSelector).length?document.querySelectorAll(promo.saleSelector):!1)),regularPrices=document.querySelectorAll(promo.selector);let prices=salePrices||regularPrices;if(!(!callback&&document.getElementsByClassName("affirm-as-low-as")[0])){removeExistingALA();for(let i2 in prices){if(promo.comparePrices){if(prices[i2].innerText){price=Number(prices[i2].innerText.replace(/[^\d]/g,""));let nodeList2=prices[i2].childNodes;for(let n in nodeList2){let nodePrice=nodeList2[n].innerText;if(nodePrice&&nodePrice.length){for(;!Number(nodePrice[0])&&nodePrice.length>0;)nodePrice=nodePrice.slice(1);nodePrice=Number(nodePrice),price=price>nodePrice&&nodePrice!=0?nodePrice:price}}price=price.toString()}}else price=prices[i2].innerText;if(price){let totalAmount=price.replace(/[^\d]/g,"");var thisPrice=parseInt(totalAmount).toString();promo.addCents&&(thisPrice+="00"),upsertAla(promo,thisPrice,prices[i2],callback)}}}}function upsertAla(promo,itemPrice,insertElement2,callback){if(!validatePrice(itemPrice))return;if(callback)if(document.querySelector(".affirm-as-low-as")){if(typeof jQuery<"u")return jQuery(".affirm-as-low-as").attr("data-amount",itemPrice),callback()}else return insertALA(),affirm.ui.ready(function(){affirm.ui.refresh()}),callback();insertALA();function insertALA(){let ala=buildAffirmALA(promo,itemPrice);ala&&insertElement2&&typeof insertElement2=="object"&&typeof insertElement2!==null&&(insertElement2.insertAdjacentElement(promo.position,ala),affirm.ui.ready(function(){affirm.ui.refresh()}))}}function buildAffirmALA(promo,itemPrice){var promoEl=document.createElement("p");promoEl.className="affirm-as-low-as",promoEl.dataset.amount=itemPrice,promoEl.dataset.affirmType=promo.logoType,promoEl.dataset.pageType=promo.pageType,(promo.logoType==="logo"||promo.logoType==="symbol")&&(promoEl.dataset.affirmColor=promo.logoColor);let style="font-size: "+promo.fontSize+"px;";if(promo.styleArray)for(i in styleArray)style+=styleArray[i];return promoEl.style=style,promoEl}function validatePrice(itemPrice){var numOnly=itemPrice.match(/^[0-9]+$/)!=null;return!!numOnly}function removeExistingALA(){const e=document.querySelector(".affirm-as-low-as");e&&e.parentElement.removeChild(e)}function upsertVariantALA(promo,currentProduct2,callback=null){let thisElement=promo.alaElement?document.querySelector(promo.alaElement):document.querySelector(defaultAlaElement),selectedOption=new URLSearchParams(window.location.search).get("variant");if(selectedOption)for(let i2 of currentProduct2.variants)i2.id==selectedOption&&upsertAla(promo,i2.price.toString(),thisElement,callback);else currentProduct2.variants&&upsertAla(promo,currentProduct2.variants[0].price.toString(),thisElement,callback)}
//# sourceMappingURL=/s/files/1/0077/0352/7475/t/52/assets/affirmShopify.js.map?shop=boogaloo-beds.myshopify.com&v=1695333860
