if(void 0===window.giftbeeloaded||null===document.getElementById("giftbee-loaded")){try{window.giftbeeloaded=!0;var elem54214243=document.createElement("div");elem54214243.id="giftbee-loaded",elem54214243.style.cssText="display:none;",document.body.appendChild(elem54214243)}catch(t){console.error(t)}!function(){var t={bucket:0,capacity:10,delay:500,add:function(){this.bucket++,this.clearBucket()},clearBucketTimeout:null,clearBucket:function(){null!==this.clearBucketTimeout&&clearTimeout(this.clearBucketTimeout);var t=this;setTimeout((function(){t.bucket=0}),this.delay)},hasSpace:function(){return this.bucket<this.capacity}};!function(e){for(var n=[],i=[],o=(new Date).getTime(),a=0;a<n.length;a++){var r=!0;if(void 0!==n[a].use_date_condition&&"true"===n[a].use_date_condition){if(void 0!==n[a].date_from&&null!==n[a].date_from&&""!==n[a].date_from.trim())new Date(n[a].date_from).getTime()>o&&(r=!1);if(void 0!==n[a].date_to&&null!==n[a].date_to&&""!==n[a].date_to.trim())new Date(n[a].date_to).getTime()<o&&(r=!1)}!0===r&&i.push(n[a])}if("undefined"!=typeof Shopify&&void 0!==Shopify.currency&&void 0!==Shopify.currency.rate)for(var c=1*Shopify.currency.rate,d=0;d<i.length;d++){var s=i[d];"cart_value"===s.condition_type&&(""!==s.cart_value_min&&(s.cart_value_min=s.cart_value_min*c),""!==s.cart_value_max&&(s.cart_value_max=s.cart_value_max*c))}var u=[];function l(t,e,n){void 0!==u[t]&&clearTimeout(u[t]),u[t]=setTimeout(e,n)}var f,p,h,y,v=(f={key:"cartbot_data_",save:function(t,e){try{localStorage.setItem(this.getKey()+t,e)}catch(t){console.log("Error when saving data",t)}},get:function(t){try{var e=localStorage.getItem(this.getKey()+t);return JSON.parse(e)}catch(t){return!1}return!1},getKey:function(){return this.key}},{cart:{_cartData:{items:[]},get cartData(){if(0===this._cartData.items.length){var t=f.get("cart");if(!1!==t)return t}return this._cartData},set cartData(t){this._cartData=t},get:function(e,n){if(void 0===e&&(e=!0),void 0===n&&(n=!0),e){var i=Date.now();if(i=Math.round(i/1500),Object.keys(this.cartData).length>0){m&&console.log("---- reading cart data from cache via promise ----");var o=this;return new Promise(((t,e)=>{t(new Response(JSON.stringify(o.cartData),{status:200,statusText:"Smashing success!"}))}))}}return!1===t.hasSpace()?(console.log("leaky bucket is full"),null):(t.add(),o=this,fetch(p.getRootUrl()+"cart.json?cartbot-cart-call",{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){return t.clone().json().then((function(e){var i=JSON.parse(JSON.stringify(e));if(void 0!==window.bndlr&&"function"==typeof window.bndlr.updateCartWithDiscounts)try{var a=window.bndlr.updateCartWithDiscounts(i);void 0!==a.discounted_cart_object&&(i=a.discounted_cart_object)}catch(t){console.log(t)}return m&&console.log("---- saving cart data to cache ----",JSON.parse(JSON.stringify(i))),o.cartData=JSON.parse(JSON.stringify(i)),g=!1,n&&f.save("cart",JSON.stringify(i)),t}))})))}},nav:p={getRootUrl:function(){return window.location.origin?window.location.origin+"/":window.location.protocol+"/"+window.location.host+"/"},isHomePage:function(){return"/"===window.location.pathname},isProductPage:function(){return!!/\/products\/([^\?\/\n]+)/.test(window.location.href)},isCartPage:function(){return!!/\/cart\/?/.test(window.location.href)},getProductHandle:function(t){if(void 0===t&&(t=(t=window.location.href).replace("/products/products","/products")),/\/products\/([^\?\/\n]+)/.test(t)){var e=t.match(/\/products\/([^\?\/\n]+)/);if(void 0!==e[1])try{return decodeURIComponent(e[1]).replace("#","")}catch(t){return e[1].replace("#","")}}return!1},getAppApiEndpoint:function(){return"https://app.cart-bot.net/public/api/"},getInvoiceEndpoint:function(){return this.getAppApiEndpoint()+"cdo.php?shop=boogaloo-beds.myshopify.com"},getSellingPlanId:function(){var t=this.getQueryParams(window.location.search);return void 0!==t.selling_plan?t.selling_plan:""},getQueryParams:function(t){t=t.split("+").join(" ");for(var e,n={},i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return n},reload:function(){window.location=self.location,window.location.reload(!0)},isQueryParameterSet:function(t){return void 0!==this.getQueryParams(window.location.search)[t]}},string:{getRandomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyz0123456789",n=e.length,i=[],o=0;o<t;o++)i.push(e.charAt(Math.floor(Math.random()*n)));return i.join("")}},queue:{queue:{},add:function(t,e,n){void 0===this.queue[t]&&(this.queue[t]={finish:n,q:[],tick:0}),this.queue[t].q.push(e)},process:function(t){if(void 0!==this.queue[t]){this.queue[t].q.length;var e=this.queue[t].tick;void 0!==this.queue[t].q[e]&&(this.queue[t].q[e](),this.tick(t))}},tick:function(t){void 0!==this.queue[t]&&(this.queue[t].tick++,this.queue[t].tick===this.queue[t].q.length?(this.queue[t].finish(),delete this.queue[t]):this.process(t))},cancel:function(t){delete this.queue[t]}},promiseQueue:h={queue:{},add:function(t,e,n){void 0===this.queue[t]&&(this.queue[t]={finish:n,q:[],tick:0}),this.queue[t].q.push(e)},process:function(t){if(void 0!==this.queue[t]){this.queue[t].q.length;var e=this.queue[t].tick;void 0!==this.queue[t].q[e]&&this.queue[t].q[e]().then((function(){setTimeout((function(){h.tick(t)}),10)}))}},tick:function(t){void 0!==this.queue[t]&&(this.queue[t].tick++,this.queue[t].tick===this.queue[t].q.length?(this.queue[t].finish(),delete this.queue[t]):this.process(t))},cancel:function(t){delete this.queue[t]}},cookie:{key:"cartbot_data_",maxAge:36e5,set:function(t,e,n){var i=new Date;t=this.key+t;var o={data:JSON.parse(e),time:(new Date).getTime()};if(e=JSON.stringify(o),n>0){i.setTime(i.getTime()+24*n*60*60*1e3);var a="expires="+i.toUTCString();document.cookie=t+"="+e+";"+a+";path=/"}else document.cookie=t+"="+e+";path=/"},get:function(t){var e=(t=this.key+t)+"=",n=document.cookie;n=n.split(";");for(var i=[],o=0;o<n.length;o++)try{i.push(decodeURIComponent(n[o].trim(" ")))}catch(t){console.error(n[o])}var a="";for(o=0;o<i.length;o++){for(var r=i[o];" "==r.charAt(0);)r=r.substring(1);0==r.indexOf(e)&&(a=r.substring(e.length,r.length),o=i.length)}try{var c=JSON.parse(a);return void 0===c.time?a:c.time<(new Date).getTime()-this.maxAge?"":JSON.stringify(c.data)}catch(t){}return""}}}),m=!1,g=!1,_=function(){function e(t,e){for(;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null}function n(){if(void 0!==window.bndlr&&"function"==typeof bndlr.canUseCheckout&&"function"==typeof bndlr.checkout&&!0===bndlr.canUseCheckout())return bndlr.checkout(),!0;window.location.href="/checkout"}function o(t,e){var n=v.cart.get(!1).then((function(n){return function(t,e,n){void 0===n&&(n="");var i=u(void 0,e,n),o=JSON.parse(JSON.stringify(i.remove));if(i.add.length>0){var a=q(i.add).then((function(e){o.length>0?b(o).then((function(e){t&&v.nav.isCartPage()&&v.nav.reload()})):t&&v.nav.isCartPage()&&null!==e&&(console.log("reloading the cart page"),v.nav.reload())}));return a}if(i.remove.length>0)return a=b(i.remove).then((function(e){t&&v.nav.isCartPage()&&v.nav.reload()}));return new Promise(((t,e)=>{t(new Response("",{status:200,statusText:"Fallback promise."}))}))}(!0,t,e)}));return n}function a(){return m&&console.log("== refreshing local cart =="),v.cart.get(!1)}function r(arguments,t){void 0===t&&(t=!1);var e=arguments[0],n=arguments[1],i=d(e,"add"),o=d(e,"change"),a={};if(i||t&&o)if("object"==typeof n&&"object"==typeof n.body)for(var r of n.body.entries())a[r[0]]=r[1];else if("object"==typeof n&&"string"==typeof n.body&&void 0!==n.headers&&"string"==typeof n.headers["Content-Type"]&&-1!==n.headers["Content-Type"].indexOf("application/json"))try{a=JSON.parse(n.body)}catch(t){}else if("object"==typeof n&&"string"==typeof n.body)a=v.nav.getQueryParams(n.body);else if("object"==typeof n&&void 0===n.body)try{for(var r of n.entries())a[r[0]]=r[1]}catch(t){console.log(t)}else if("string"==typeof n){try{a=JSON.parse(n)}catch(t){}if(0===Object.keys(a).length)try{a=v.nav.getQueryParams(n)}catch(t){}}if(void 0!==a.line&&void 0===a.id){var c=JSON.parse(JSON.stringify(v.cart.cartData)),s=1*a.line;s-=1,void 0!==c.items&&void 0!==c.items[s]&&(a.id=c.items[s].id,a.key=c.items[s].key)}if(void 0!==a.items&&void 0!==a.items[0]){var u=a.items;(a=a.items[0]).items=u}if(void 0!==a["id[]"]&&(a.id=a["id[]"]),void 0!==a["items[0][id]"]&&(a.id=a["items[0][id]"]),void 0!==a["items[0][quantity]"]&&(a.quantity=a["items[0][quantity]"]),void 0!==a["items[0][selling_plan]"]&&(a.selling_plan=a["items[0][selling_plan]"]),void 0!==a.id){var l=1;void 0!==a.quantity&&(l=a.quantity);var f="";void 0!==a.selling_plan&&(f=a.selling_plan);var p=[];if(void 0!==a.items&&a.items.length>1)for(var h=0;h<a.items.length;h++){var y=a.items[h];if(void 0!==y.id){var m=1;void 0!==y.quantity&&(m=y.quantity);var g="";void 0!==y.selling_plan&&(g=y.selling_plan);var _={id:y.id,quantity:m,selling_plan:g};p.push(_)}}if(0===p.length){var w=!0;for(h=0;w;){if(void 0===a["items["+h+"][id]"])w=!1;else{var q=a["items["+h+"][id]"];m=1;void 0!==a["items["+h+"][quantity]"]&&(m=a["items["+h+"][quantity]"]);g="";void 0!==a["items["+h+"][selling_plan]"]&&(g=a["items["+h+"][selling_plan]"]);_={id:q,quantity:m,selling_plan:g};p.push(_)}h++}}return{id:a.id,quantity:l,selling_plan:f,other_items:p}}return!1}function c(arguments){var t=arguments[0],e=["/cart/"],n=!1;if("string"==typeof t)for(var i=0;i<e.length;i++)-1!==t.indexOf(e[i])&&-1===t.indexOf("cartbot-cart-call")&&(n=!0,i=e.length);return n}function d(t,e){var n={add:["/cart/add.js","/cart/add.json","/cart/add"],change:["/cart/change.js","/cart/change.json","/cart/change","/cart/update.js","/cart/update.json"]};if(n.change.push("/cart/update"),void 0===n[e])return!1;var i=n[e],o=!1;if("string"==typeof t)for(var a=0;a<i.length;a++)-1!==t.indexOf(i[a])&&-1===t.indexOf("cartbot-cart-call")&&(o=!0,a=i.length);return o}function s(t,e,n){var i={add:[],remove:[]};if(void 0!==t.other_items&&t.other_items.length>1)for(var o=0;o<t.other_items.length;o++){var a=u(t.other_items[o],e,n);void 0!==a.add&&a.add.length>0&&(i.add=i.add.concat(a.add)),void 0!==a.remove&&a.remove.length>0&&(i.remove=i.remove.concat(a.remove))}else i=u(t,e,n);return i}function u(t,e,n){if(m&&(console.log("---- getActions ----"),console.trace()),void 0===e&&(e=!1),void 0!==window.completelyDisableCartbotApp&&!0===window.completelyDisableCartbotApp)return console.log("Cartbot app was disabled by the completelyDisableCartbotApp variable"),{add:[],remove:[]};void 0===n&&(n="");var o=JSON.parse(JSON.stringify(v.cart.cartData));JSON.parse(JSON.stringify(o));m&&console.log("cart in getActions",JSON.parse(JSON.stringify(o)));var a=[];if(void 0!==t){var r=!1;if(o.items.length>0)for(var c=0;c<o.items.length;c++){var d="";void 0!==o.items[c].selling_plan_allocation&&(d=o.items[c].selling_plan_allocation.selling_plan.id);var s="";void 0!==t.selling_plan&&(s=t.selling_plan),1*o.items[c].id!=1*t.id&&o.items[c].key!==t.id||d+""!=s+""&&(1*t.quantity!=0||"change"!==n)||(o.items[c].quantity="change"===n?1*t.quantity:1*o.items[c].quantity+1*t.quantity,r=!0,c=o.items.length)}if(!1===r&&"change"!==n){var u={id:1*t.id,quantity:1*t.quantity,key:1*t.id};void 0!==t.selling_plan&&null!==t.selling_plan&&(u.selling_plan_allocation={selling_plan:{id:t.selling_plan}}),o.items.push(u)}void 0!==t.quantity&&t.quantity}var l=0;if(o.items.length>0)for(c=0;c<o.items.length;c++)void 0!==o.items[c].line_price&&(l+=o.items[c].line_price);l/=100,m&&console.log("totalCartValue",l);for(var f=[],p=[],h=0;h<i.length;h++)for(var g=i[h],_=!0,w=0;_&&w<1e4;){_=!1,w++;var q=JSON.parse(JSON.stringify(o)),b=!0,C="true"!==g.must_include_any_variant,S="true"===g.works_in_reverse;"n_products"===g.condition_type&&(C=!1);var O=!1,k=[],E=!1;if("true"===g.apply_once_per_session&&!0!==e)try{""!==(M=v.cookie.get("applied_rules"))&&(M=JSON.parse(M)),void 0!==M["_"+g.id]&&(E=!0,b=!1)}catch(t){console.error("cartbot",t)}if("products"===g.condition_type||"n_products"===g.condition_type||"cart_value_and_products"===g.condition_type){if(g.product_variants_contain.length>0){for(var T=0,N=0,j=0;j<g.product_variants_contain.length;j++)for(var J=g.product_variants_contain[j],A=0,D=0;D<o.items.length;D++){d="";if(void 0!==(u=o.items[D]).selling_plan_allocation&&(d=u.selling_plan_allocation.selling_plan.id+""),1*J.variant_id==1*u.id&&u.quantity>0&&u.quantity>=J.quantity&&A<J.quantity&&(J.selling_plan_id+""===d||"one_time_or_any"===J.selling_plan_id||"any"===J.selling_plan_id&&""!==d))if("n_products"===g.condition_type){var P=null;"true"===g.products_max_enable?(P=1*g.products_max,P-=T):P=99999999;var x=u.quantity;x>P&&(x=P),T++,N+=x,u.quantity=u.quantity-x,A=x,m&&console.log("Reducing quantity of item "+u.id+" for quantity of "+x+" because of "+g.name+" rule"),k.push({id:J.variant_id,quantity:x,line_key:u.key})}else T++,u.quantity=u.quantity-J.quantity,A=J.quantity,m&&console.log("Reducing quantity of item "+u.id+" for quantity of "+J.quantity+" because of "+g.name+" rule",u.quantity),k.push({id:J.variant_id,quantity:J.quantity,line_key:u.key});!0===C?T===g.product_variants_contain.length&&(D=o.items.length):"n_products"===g.condition_type?"true"===g.products_max_enable&&N>=1*g.products_max?(D=o.items.length,m&&console.log("Stopping the loop")):m&&console.log("NOT stopping the loop"):T>0?(D=o.items.length,m&&console.log("Stopping the loop"),"false"===g.apply_once_per_cart&&(j=g.product_variants_contain.length)):m&&console.log("NOT stopping the loop")}!0===C?(b=T===g.product_variants_contain.length,"cart_value_and_products"===g.condition_type&&(y=!0===b)):"n_products"===g.condition_type?b=N>=1*g.products_min:"cart_value_and_products"===g.condition_type?y=T>0:b=T>0}}else if("cart_value"===g.condition_type){b=!1;var R=l;"true"===g.cart_value_max_enable?1*g.cart_value_min<=R&&1*g.cart_value_max>=R&&(b=!0):1*g.cart_value_min<=R&&(b=!0)}if("cart_value_and_products"===g.condition_type){let t=!1,e=y;b=!1,"true"===g.cart_value_max_enable?1*g.cart_value_min<=l&&1*g.cart_value_max>=l&&(t=!0):1*g.cart_value_min<=l&&(t=!0),b=!0===t&&!0===e}if(m&&console.log("canAddItems",b),b){if("true"===g.apply_only_on_add_to_cart&&"add"!==n){_=!1;continue}if(g.product_variants_add.length>0){for(j=0;j<g.product_variants_add.length;j++){var Q=(G=g.product_variants_add[j]).quantity,I=!1;if("add"!==n||"true"===g.apply_once_per_cart||"false"===g.remove_the_initial_variants)for(D=0;D<o.items.length;D++){d="";if(void 0!==(u=o.items[D]).selling_plan_allocation&&(d=u.selling_plan_allocation.selling_plan.id),1*G.variant_id==1*u.id&&u.quantity>0&&d+""==G.selling_plan_id+""){var U=u.quantity;if(U>G.quantity&&(U=G.quantity),Q<U&&(U=Q),"true"===g.remove_the_initial_variants&&"false"===g.apply_once_per_cart||(Q-=U)<0&&(Q=0),I=!0,u.quantity=u.quantity-U,m&&(console.log("Subtracting quantity of item "+u.id+" for quantity of "+U+" because of "+g.name+" rule"),console.log("New quantity "+u.quantity)),"true"===g.apply_once_per_cart&&u.quantity>0&&S&&"cart_value"!==g.condition_type){var L=JSON.parse(JSON.stringify(g));a.push(L),_=!1}if("true"===g.apply_once_per_cart&&u.quantity>0&&S&&"cart_value"===g.condition_type){L=JSON.parse(JSON.stringify(g));a.push(L),_=!1}}}!1===I||!0===I&&Q>0?(!1===E&&f.push({id:G.variant_id,quantity:Q,selling_plan:G.selling_plan_id}),O=!0,m&&console.log("Adding variant "+G.variant_id+" to the cart with quantity of "+Q+" because of "+g.name+" rule."),"false"===g.apply_once_per_cart&&"cart_value"!==g.condition_type&&(_=!0)):("false"===g.apply_once_per_cart&&"cart_value"!==g.condition_type&&(_=!0),k.length>0&&"true"===g.remove_the_initial_variants&&"false"===g.apply_once_per_cart&&(O=!0))}if("true"===g.apply_once_per_session&&!0===O&&!0!==e)try{var M;(M=""!==(M=v.cookie.get("applied_rules"))?JSON.parse(M):{})["_"+g.id]=g.id,v.cookie.set("applied_rules",JSON.stringify(M),0)}catch(t){}}}else o=JSON.parse(JSON.stringify(q)),S&&(m&&console.log("Adding rule in for removal",JSON.parse(JSON.stringify(g)),JSON.parse(JSON.stringify(q))),a.push(JSON.parse(JSON.stringify(g))));"true"===g.remove_the_initial_variants&&!0===O&&(p=p.concat(JSON.parse(JSON.stringify(k)))),k=[]}if(m&&console.log("rulesForRemoval",JSON.parse(JSON.stringify(a))),a.length>0)for(var H=0;H<a.length;H++){g=a[H];var $=[],B=o;for(j=0;j<g.product_variants_add.length;j++){var G=g.product_variants_add[j];for(D=0;D<B.items.length;D++){d="";if(void 0!==(u=B.items[D]).selling_plan_allocation&&(d=u.selling_plan_allocation.selling_plan.id+""),1*G.variant_id==1*u.id&&u.quantity>0&&G.selling_plan_id+""===d){D=B.items.length;var V=1*G.quantity;"cart_value"===g.condition_type&&u.quantity>1*G.quantity&&(V=u.quantity),"true"===g.works_in_reverse&&(V=u.quantity),$.push({id:G.variant_id,quantity:1*V,line_key:u.key}),u.quantity-=1*V,m&&(console.log("Removing variant "+G.variant_id+" for quantity of "+V+" because of "+g.name+" rule"),console.log("Current quantity "+u.quantity+". Item id "+u.id),console.log(JSON.parse(JSON.stringify(B))))}}}p=p.concat(JSON.parse(JSON.stringify($)))}return m&&v.nav.isQueryParameterSet("test")?{add:[],remove:[]}:(m&&console.log({add:f,remove:p}),{add:f,remove:p})}function f(){if("function"==typeof window.SLIDECART_UPDATE)try{window.SLIDECART_UPDATE()}catch(t){}if(void 0!==window.theme&&void 0!==window.theme.ajaxCart&&"function"==typeof window.theme.ajaxCart.update)try{window.theme.ajaxCart.update()}catch(t){}if("function"==typeof window.icartCartActivityEvent)try{window.icartCartActivityEvent()}catch(t){}try{document.dispatchEvent(new CustomEvent("cart:refresh"))}catch(t){}try{document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{bubbles:!0}))}catch(t){}try{document.dispatchEvent(new CustomEvent("product:added",{detail:{quantity:1},bubbles:!0}))}catch(t){}if(void 0!==window.HsCartDrawer&&"function"==typeof window.HsCartDrawer.updateSlideCart&&l("hscartdrawer",(function(){try{HsCartDrawer.updateSlideCart()}catch(t){console.log(t)}}),100),void 0!==window.HS_SLIDE_CART_OPEN&&"function"==typeof window.HS_SLIDE_CART_OPEN&&l("hscartdraweropen",(function(){try{window.HS_SLIDE_CART_OPEN()}catch(t){bundlerConsole.log(t)}}),100),"undefined"!=typeof theme&&void 0!==theme.Cart&&"function"==typeof theme.Cart.updateCart)try{theme.Cart.updateCart()}catch(t){}if("function"==typeof window.updateMiniCartContents)try{window.updateMiniCartContents()}catch(t){}if("function"==typeof window.loadEgCartDrawer)try{window.loadEgCartDrawer()}catch(t){}try{document.dispatchEvent(new CustomEvent("cart:build"))}catch(t){}try{document.dispatchEvent(new CustomEvent("obsidian:upsell:refresh")),document.dispatchEvent(new CustomEvent("obsidian:upsell:open"))}catch(t){}var t=document.getElementById("site-cart");if(null!==t)try{t.show()}catch(t){}if("undefined"!=typeof CartJS&&"function"==typeof CartJS.getCart)try{CartJS.getCart()}catch(t){console.log(t)}if(void 0!==window.SLIDECART_UPDATE)try{window.SLIDECART_UPDATE()}catch(t){bundlerConsole.log(t)}if(void 0!==window.SLIDECART_OPEN&&setTimeout((function(){try{window.SLIDECART_OPEN()}catch(t){bundlerConsole.log(t)}}),500),"undefined"!=typeof Shopify&&void 0!==Shopify.theme&&void 0!==Shopify.theme.jsAjaxCart&&"function"==typeof Shopify.theme.jsAjaxCart.updateView)try{Shopify.theme.jsAjaxCart.updateView()}catch(t){}if("undefined"!=typeof Shopify&&void 0!==Shopify.theme&&void 0!==Shopify.theme.ajaxCart&&"function"==typeof Shopify.theme.ajaxCart.updateView)try{v.cart.get(!1).then((function(t){t.clone().json().then((function(t){Shopify.theme.ajaxCart.updateView({cart_url:window.location.origin+"/cart"},t)}))}))}catch(t){}if(void 0!==window.theme&&void 0!==window.theme.MiniCart&&"function"==typeof window.theme.MiniCart.update)try{theme.MiniCart.update()}catch(t){}if(void 0!==window.ajaxCart&&"function"==typeof window.ajaxCart.load)try{window.ajaxCart.load()}catch(t){}if(void 0!==window.cart&&"function"==typeof window.cart.getCart)try{window.cart.getCart()}catch(t){}if(void 0!==window.geckoShopify&&"function"==typeof window.geckoShopify.onCartUpdate)try{window.geckoShopify.onCartUpdate(1,1,19041994)}catch(t){}if("function"==typeof window.flatRefreshCartCallback)try{window.flatRefreshCartCallback()}catch(t){}try{document.querySelectorAll("html")[0]._x_dataStack[0].updateCart(!0)}catch(t){}try{document.dispatchEvent(new CustomEvent("product:added",{detail:{quantity:0}}))}catch(t){}try{void 0!==window.Alpine&&window.Alpine.store("main").fetchCart()}catch(t){}try{v.cart.get(!1).then((function(t){t.clone().json().then((function(t){document.dispatchEvent(new CustomEvent("theme:cart:reload"));var e=document.querySelector('#cart-icon-bubble .cart-count-bubble span[aria-hidden="true"]');null!==e&&(e.innerHTML=t.item_count);var n=document.querySelector("#cart-notification-button");if(null!==n&&(n.innerHTML=n.innerHTML.replace(/\d+/,t.item_count)),void 0!==t.items&&0===t.items.length){var i=document.querySelector("cart-drawer.drawer");null!==i&&i.classList.add("is-empty")}}))}))}catch(t){console.error(t)}try{v.cart.get(!1).then((function(t){t.clone().json().then((function(t){if(void 0!==t.item_count){var e=t.item_count,n=document.querySelector("cart-count");null!==n&&(n.innerHTML=e);var i=document.querySelector(".satcb-cs-header-title .satcb-cs-header-count");null!==i&&(i.innerHTML=e);var o=document.querySelector("#CartCount [data-cart-count]");null!==o&&(o.innerHTML=e)}"undefined"!=typeof window&&void 0!==window.wetheme&&void 0!==window.wetheme.updateCartDrawer&&window.wetheme.updateCartDrawer(t)}))}))}catch(t){}try{var e=document.querySelector("cart-notification")||document.querySelector("cart-drawer mini-cart")||document.querySelector("cart-drawer")||document.querySelector("product-form.product-form")||document.querySelector("#mini-cart");if(null!==e&&"function"==typeof e.renderContents){var n="cart-drawer,cart-icon-bubble";if("function"==typeof e.getSectionsToRender){var i=[];n=e.getSectionsToRender();for(var o in n)n.hasOwnProperty(o)&&("string"==typeof n[o].section?i.push(n[o].section):"string"==typeof n[o].id&&i.push(n[o].id));i.length>0&&(n=i.join(","))}fetch(v.nav.getRootUrl()+"cart?sections="+n,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){try{return t.clone().json().then((function(t){try{var n={sections:t};e.renderContents(n)}catch(t){}}))}catch(t){}}))}}catch(t){console.error(t)}try{var a=document.querySelector("loess-cart-items")||document.querySelector("loess-cart-drawer-items");if(null!==a&&"function"==typeof a.renderCartItems){n="cart-drawer,cart-icon-bubble";if("function"==typeof a.getSectionsToRender){i=[],n=a.getSectionsToRender();for(var o in n)n.hasOwnProperty(o)&&("string"==typeof n[o].section?i.push(n[o].section):"string"==typeof n[o].id&&i.push(n[o].id));i.length>0&&(n=i.join(","))}fetch(v.nav.getRootUrl()+"cart?sections="+n,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){try{return t.clone().json().then((function(t){v.cart.get(!0).then((function(e){e.clone().json().then((function(e){e.sections=t,a.renderCartItems(e)}))}))}))}catch(t){console.error(t)}}))}}catch(t){console.error(t)}try{var r=document.querySelector(".minicart__outerbox");if(null!==r&&"function"==typeof window.cartContentUpdate){n=r.dataset.section;fetch(v.nav.getRootUrl()+"cart?sections="+n,{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){try{return t.clone().json().then((function(t){v.cart.get(!0).then((function(e){e.clone().json().then((function(e){e.sections=t,window.cartContentUpdate(e,r,n)}))}))}))}catch(t){console.error(t)}}))}}catch(t){console.error(t)}try{setTimeout((()=>{document.dispatchEvent(new CustomEvent("dispatch:cart-drawer:refresh"))}),500)}catch(t){}try{"function"===window.$&&window.$("form.cart-drawer").length>0&&(window.$(".cart-drawer input").first().trigger("blur"),setTimeout((function(){window.$(".cart-drawer input").first().trigger("input")}),350))}catch(t){console.log(t)}try{window.dispatchEvent(new Event("update_cart"))}catch(t){}try{document.dispatchEvent(new Event("theme:cartchanged"))}catch(t){}try{void 0!==window.theme&&void 0!==window.theme.cart&&"function"==typeof window.theme.cart._updateCart&&window.theme.cart._updateCart()}catch(t){}try{void 0!==window.AMG&&void 0!==window.AMG.sidecart&&"function"==typeof window.AMG.sidecart.refresh&&window.AMG.sidecart.refresh()}catch(t){}if(void 0!==window.ajaxCart&&"function"==typeof window.ajaxCart.load)try{ajaxCart.load()}catch(t){}if(void 0!==window.Shopify&&"function"==typeof window.Shopify.onItemAdded)try{window.Shopify.onItemAdded()}catch(t){}if(void 0!==window.Rebuy&&void 0!==window.Rebuy.Cart&&"function"==typeof window.Rebuy.Cart.fetchShopifyCart)try{Rebuy.Cart.fetchShopifyCart((function(t){}))}catch(t){}}function p(t,e=new FormData,n=""){for(let o in t)if(t.hasOwnProperty(o)){const a=t[o],r=n?`${n}[${o}]`:o;if("object"!=typeof a||Array.isArray(a))if(Array.isArray(a))for(var i=0;i<a.length;i++)p(a[i],e,`${r}[${i}]`);else e.append(r,a);else p(a,e,r)}return e}function h(t){let e="";for(let[n,i]of t.entries())e.length>0&&(e+="&"),e+=`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;return e}function _(t,e){for(var n={items:[]},i=0;i<t.length;i++){var o={id:t[i].id,quantity:t[i].quantity};void 0!==t[i].selling_plan&&""!==t[i].selling_plan&&(o.selling_plan=t[i].selling_plan),void 0!==e&&(o.properties=e);for(var a=!1,r=0;r<n.items.length;r++)n.items[r].id!==o.id||typeof o.selling_plan!=typeof n.items[r].selling_plan||void 0!==o.selling_plan&&o.selling_plan!==n.items[r].selling_plan||(n.items[r].quantity+=o.quantity,a=!0);!1===a&&n.items.push(o)}void 0!==n.items&&1===n.items.length&&(n=n.items[0]);return n}var w=!1;async function q(e,n,i){void 0===n&&(n=!0);var o=_(e,i);if(!0===w)return console.log("Already adding to the cart"),null;if(w=!0,!1===t.hasSpace())return console.log("leaky bucket is full"),null;t.add();var a="/";return void 0!==window.Shopify&&void 0!==window.Shopify.routes&&"string"==typeof window.Shopify.routes.root&&(a=window.Shopify.routes.root),await fetch(a+"cart/add?cartbot-cart-call&",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(o)}).then((function(t){if(w=!1,n&&(void 0===t.status||200!==t.status))throw new Error("Cartbot: Couldnt add the product to the cart automatically. Please recreate your bot or check that the product you are trying to add exists and has the correct selling plan selected (if needed). "+t.status);if("function"==typeof window.$)try{window.$("body").trigger("added.ajaxProduct"),document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{}))}catch(t){}try{f()}catch(t){console.error(t)}})).catch((function(t){w=!1,console.log("error",t);try{f()}catch(t){console.error(t)}return null}))}async function b(t){for(var e={},n=0;n<t.length;n++){var i=t[n],o=i.line_key;void 0===e[o]?e[o]={id:i.id,line_key:i.line_key,removable_quantity:1*i.quantity}:e[o].removable_quantity+=i.quantity}return v.cart.get(!1).then((function(t){return t.clone().json().then((function(t){var n={};for(var i in e)if(e.hasOwnProperty(i)){for(var o=!1,a=0;a<t.items.length;a++){if(t.items[a].key===i&&t.items[a].quantity>0)(d=t.items[a].quantity-e[i].removable_quantity)<0&&(d=0),t.items[a].quantity=d,n[i]=d,o=!0}if(!1===o)for(a=0;a<t.items.length;a++){if(0===t.items[a].key.indexOf(i)&&t.items[a].quantity>0)(d=t.items[a].quantity-e[i].removable_quantity)<0&&(d=0),n[i]=d,o=!0}if(!1===o){var r=i.split(":"),c="";void 0!==r[0]&&(c=r[0]);for(a=0;a<t.items.length;a++){var d;if(0===t.items[a].key.indexOf(c)&&t.items[a].quantity>0)(d=t.items[a].quantity-e[i].removable_quantity)<0&&(d=0),n[i]=d,o=!0}}}return fetch("/cart/update.js?cartbot-cart-call",{method:"POST",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({updates:n})}).then((function(t){if("function"==typeof window.$)try{window.$("body").trigger("added.ajaxProduct"),document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{}))}catch(t){}try{f()}catch(t){console.error(t)}}))}))}))}return{init:function(){if(void 0!==window.completelyDisableCartbotApp&&!0===window.completelyDisableCartbotApp)return console.log("Cartbot is disabled via completelyDisableCartbotApp variable."),!0;!function(){!1===function(){const t=navigator.userAgent;return/CriOS/.test(t)}()&&(t=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){var n=this._url,i=!1;if("string"==typeof n&&n.length>0){var l=v.string.getRandomString(10);try{var f=this.onreadystatechange;if(this.onreadystatechange=function(){"function"==typeof f&&f.apply(this,arguments),200===this.status&&4===this.readyState&&v.promiseQueue.process(l)},d(n,"change")){var y=r([n,arguments[0]],!0);if((C=u(y,!1,"change")).remove.length>0){var m=arguments,w=this;i=!0,C.add.length>0?q(C.add,!1).then((function(e){C.remove.length>0&&C.remove[0].id==y.id&&C.remove[0].quantity===1*y.quantity?b(C.remove).then((function(t){v.nav.isCartPage()&&v.nav.reload()})):b(C.remove).then((function(e){t.apply(w,m)}))})):b(C.remove).then((function(e){t.apply(w,m)}))}else v.promiseQueue.add(l,(function(){return o(!1,"change")}),(function(){}))}else{var C;if(!1!==(y=r([n,arguments[0]])))if(g=!0,v.promiseQueue.add(l,(function(){return a()}),(function(){})),(C=s(y,!1,"add")).add.length>0){m=arguments,w=this,i=!0;var arguments,S=!1;if(C.remove.length>0&&C.remove[0].id==y.id&&C.remove[0].quantity===1*y.quantity&&"string"==typeof(arguments=m)[0]){var O=p(_(C.add));arguments[0]=h(O),S=!0,t.apply(w,arguments)}!1===S&&q(C.add,!1).then((function(e){t.apply(w,m),C.remove.length>0&&v.promiseQueue.add(l,(function(){return b(C.remove)}),(function(){}))}))}else C.remove.length>0?(m=arguments,w=this,b(C.remove).then((function(t){v.promiseQueue.process(l)}))):v.promiseQueue.add(l,(function(){return o(!1,"add")}),(function(){}))}}catch(t){console.log("Cartbot"),console.error(t)}c([this._url])&&(g=!0,v.promiseQueue.add(l,(function(){return a()}),(function(){})))}!0!==i&&t.apply(this,arguments)});var t;!function(t){if("function"==typeof t.fetch)try{var e=t.fetch;t.fetch=function(){var t=v.string.getRandomString(10);try{if(d(arguments[0],"change")){v.promiseQueue.add(t,(function(){return o(!1,"change")}),(function(){}));var n=r(arguments,!0);if((f=u(n,!1,"change")).add.length>0){if(1===f.add.length){if(1*f.add[0].id===n.id)return console.log("This item is required and can't be removed from the cart."),new Promise(((t,e)=>{cancelled=!0,e(new Error("Can't remove this item from the cart."))}));var i=arguments,l=this;return!0,(O=e.apply(l,i)).then((function(e){q(f.add,!1).then((function(e){v.promiseQueue.process(t),v.nav.isCartPage()&&v.nav.reload()}))})),O}}else if(f.remove.length>0){i=arguments,l=this;return(O=e.apply(l,i)).then((function(e){b(f.remove).then((function(e){v.promiseQueue.process(t),v.nav.isCartPage()&&v.nav.reload()}))})),O}}else{var f;n=r(arguments);if(!1!==n)if(g=!0,v.promiseQueue.add(t,(function(){return a()}),(function(){})),(f=s(n,!1,"add")).add.length>0){i=arguments,l=this;!0,v.promiseQueue.add(t,(function(){return o(!1,"add")}),(function(){}));var arguments,h=!1;if(f.remove.length>0&&f.remove[0].id==n.id)if(void 0!==(arguments=i)[1]&&void 0!==arguments[1].body){for(var y=p(_(f.add)),m=["sections","sections_url"],w=0;w<m.length;w++)try{if("string"==typeof arguments[1].body){var C=v.nav.getQueryParams(arguments[1].body);if(void 0!==C[m[w]])var S=C[m[w]];else S=null}else S=arguments[1].body.get(m[w]);null!=S&&y.append(m[w],S)}catch(t){console.log(t)}return arguments[1].body=y,h=!0,e.apply(l,arguments)}if(!1===h)return q(f.add,!1).then((function(n){var o;return f.remove.length>0?((o=e.apply(l,i)).then((function(e){b(f.remove).then((function(e){v.promiseQueue.process(t)}))})),o):((o=e.apply(l,i)).then((function(e){v.promiseQueue.process(t)})),o)}))}else{if(f.remove.length>0){var O;i=arguments,l=this;return(O=e.apply(l,i)).then((function(e){b(f.remove).then((function(e){v.promiseQueue.process(t)}))})),O}v.promiseQueue.add(t,(function(){return o(!1,"add")}),(function(){}))}}}catch(t){console.log("Cartbot"),console.error(t)}return c(arguments)&&(g=!0,v.promiseQueue.add(t,(function(){return a()}),(function(){}))),(O=e.apply(this,arguments)).then((function(e){v.promiseQueue.process(t)})),O}}catch(t){console.log(t)}}(window)}(),function(){try{document.addEventListener("click",(function(t){try{var i=!1;if(t.target.matches('form[action*="/cart/add"] .shopify-payment-button__button')||t.target.matches('form[action*="/cart/add"] .shopify-payment-button__button *')||t.target.matches('form[action*="/cart/add"] .shopify-payment-button__more-options')||t.target.matches('form[action*="/cart/add"] [onclick="onClickBuyBtn(this, event)"]')||t.target.matches('form[action*="/cart/add"] .lh-buy-now')||i){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var a=e(t.target,"form");if(null!==a){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var c=a.getAttribute("action"),d=new URLSearchParams,s=new FormData(a);for(var l of s)d.append(l[0],l[1]);var f=u(r([c,{body:d}]),!0,"add");c+="?cartbot-cart-call";var p="buy_now_queue";if(f.add.length>0){addingVariants=!0,v.promiseQueue.add(p,(function(){return q(f.add,!1)}),n)}else f.remove.length>0&&v.promiseQueue.add(p,(function(){return b(f.remove)}),n);v.promiseQueue.add(p,(function(){return fetch(c,{method:"post",body:d}).then((function(t){}))}),n),v.promiseQueue.add(p,(function(){return o(!0,"add")}),n),v.promiseQueue.process(p)}}}catch(t){console.log(t.message)}}),!0)}catch(t){console.log(t.message)}try{addEventListener("storage",(function(t){"string"==typeof t.key&&"cartbot_data_cart"===t.key&&v.cart.get(!1,!1)}))}catch(t){console.log(t.message)}}(),setTimeout((function(){!1===g?o(!1,""):console.log("Can't check for Cartbot actions because an action is already being processed")}),1e3),window.addEventListener("icartAddToCartEvent",(function(){console.log("Item added to the cart"),o(!1,"add")})),window.addEventListener("icartUpdateCartEvent",(function(){console.log("iCart updated"),o(!1,"")}))}}}();if(void 0===w)var w={};_.init(),window.cartbot={outputProductUrls:function(){for(var t=[],e=0;e<i.length;e++)for(var n in i[e].product_variants_contain)i[e].product_variants_contain.hasOwnProperty(n)&&t.push(v.nav.getRootUrl()+"variants/"+i[e].product_variants_contain[n].variant_id);console.log(JSON.parse(JSON.stringify(t)))}}}()}()}